<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Transform 3D object between template brains — xform_brain • nat.templatebrains</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">nat.templatebrains</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/jefferislab/nat.templatebrains">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Transform 3D object between template brains</h1>
    </div>

    
    <p>Transform 3D object between template brains</p>
    

    <pre><span class='fu'>xform_brain</span>(<span class='no'>x</span>, <span class='kw'>sample</span> <span class='kw'>=</span> <span class='fu'><a href='regtemplate.html'>regtemplate</a></span>(<span class='no'>x</span>), <span class='no'>reference</span>, <span class='kw'>via</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>imagedata</span> <span class='kw'>=</span> <span class='fu'>is.character</span>(<span class='no'>x</span>), <span class='kw'>checkboth</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>x</dt>
      <dd>the 3D object to be transformed</dd>
      <dt>sample</dt>
      <dd>Source template brain (e.g. IS2) that data is currently in.</dd>
      <dt>reference</dt>
      <dd>Target template brain (e.g. IS2) that data should be
transformed into.</dd>
      <dt>via</dt>
      <dd>optional intermediate brain to use when there is no direct
bridging registration.</dd>
      <dt>imagedata</dt>
      <dd>Whether <code>x</code> should be treated as image data (presently
only supported as a file on disk) or 3D object vertices - see details.</dd>
      <dt>checkboth</dt>
      <dd>When <code>TRUE</code> will look for registrations in both
directions. See details.</dd>
      <dt>...</dt>
      <dd>extra arguments to pass to <code><a href='http://www.rdocumentation.org/packages/nat/topics/xform'>xform</a></code>.</dd>
    </dl>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>NB the <code>sample</code>, <code>reference</code> and <code>via</code> brains can
  either be <code>templatebrain</code> objects or a character string containing the
  short name of the template e.g. <code>&quot;IS2&quot;</code>.</p>
    <p>The significance of the <code>imagedata</code> and <code>checkboth</code> arguments is
  that CMTK registrations are not directly invertible although they can be
  numerically inverted in most cases (unless there are regions where folding
  occurred). For image data, numerical inversion is <em>much</em> slower.</p>
    <p>You can control whether you want to allow inverse registrations manually by
  setting <code>checkboth</code> explicitly. Otherwise when <code>checkboth=NULL</code>
  the following default behaviour occurs: <ul>
<li> when <code>via=NULL</code> <code>checkboth=T</code> but a warning will be given
  if an inversion must be used.</p>
    <p></li>
<li> when <code>via</code> is specified then <code>checkboth=T</code> but a warning
  will be given if an inversion must be used.</p>
    <p></li>
</ul></p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='mirror_brain.html'>mirror_brain</a></code>, <code><a href='regtemplate.html'>regtemplate</a></code></p>
    

    <h2 class="hasAnchor" id="examples">
      <a class="anchor" href="#examples"></a>
      Examples
    </h2>
    <pre class="examples"><div class='input'><span class='co'>## depends on nat.flybrains package and system CMTK installation</span>
<span class='co'>## Not run: ------------------------------------</span>
<span class='co'># ## reformat neurons</span>
<span class='co'># ##</span>
<span class='co'># library(nat.flybrains)</span>
<span class='co'># # Plot Kenyon cells in their original FCWB template brain</span>
<span class='co'># nopen3d()</span>
<span class='co'># plot3d(kcs20)</span>
<span class='co'># plot3d(FCWB)</span>
<span class='co'># # Convert to JFCR2 template brain</span>
<span class='co'># kcs20.jfrc2=xform_brain(kcs20, sample = FCWB, reference=JFRC2, .progress='text')</span>
<span class='co'># # now plot in the new JFRC2 space</span>
<span class='co'># nopen3d()</span>
<span class='co'># plot3d(kcs20.jfrc2)</span>
<span class='co'># plot3d(JFRC2)</span>
<span class='co'># # compare with the untransformed neurons</span>
<span class='co'># plot3d(kcs20)</span>
<span class='co'># # plot with neuropil sub regions for the left mushroom body</span>
<span class='co'># clear3d()</span>
<span class='co'># plot3d(kcs20.jfrc2)</span>
<span class='co'># # nb "MB.*_L" is a regular expression</span>
<span class='co'># plot3d(JFRC2NP.surf, "MB.*_L", alpha=0.3)</span>
<span class='co'># # compare with originals - briging registration is no perfect in peduncle</span>
<span class='co'># nopen3d()</span>
<span class='co'># plot3d(kcs20)</span>
<span class='co'># plot3d(FCWBNP.surf, "MB.*_L", alpha=0.3)</span>
<span class='co'># </span>
<span class='co'># </span>
<span class='co'># ## reformat image examples</span>
<span class='co'># # see ?cmtk.reformatx for details of all additional arguments</span>
<span class='co'># xform_brain('in.nrrd', sample=FCWB, ref=JFRC2, output='out.nrrd', Verbose=F)</span>
<span class='co'># </span>
<span class='co'># # use nearest neighbour interpolation for label field</span>
<span class='co'># xform_brain('labels.nrrd', sample=FCWB, ref=JFRC2, output='out.nrrd', interpolation='nn')</span>
<span class='co'># </span>
<span class='co'># # use binary mask to restrict (and speed up) reformatting</span>
<span class='co'># xform_brain('in.nrrd', sample=FCWB, ref=JFRC2, output='out.nrrd', mask='neuropil.nrrd')</span>
<span class='co'>## ---------------------------------------------</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Gregory Jefferis, James Manton.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
